# 이메일 발송 설정 가이드

## 문제 원인 분석

테스트 결과:
- ✅ 이메일 발송 API는 정상 작동
- ✅ 발송 로그가 DB에 저장됨
- ⚠️ **SMTP 설정이 없어 실제 이메일은 발송되지 않음**
- 현재 "시뮬레이션 모드"로만 작동 (콘솔에만 출력)

## 실제 이메일 발송 설정 방법

### 방법 1: Gmail SMTP 사용 (권장)

**1단계: Gmail 앱 비밀번호 생성**
1. Google 계정으로 로그인
2. [계정 설정](https://myaccount.google.com/) 접속
3. **보안** > 2단계 인증
4. "앱 비밀번호" 선택
5. "앱 선택" > **메일** > **기타(사용자 지정 이름)**
6. 생성된 비밀번호 복사 (예: `abcd efgh ijkl mnop`)

**2단계: .env 파일 설정**
```bash
# salemanager-backend/.env
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=생성한_앱_비밀번호
EMAIL_FROM="SaleManager <your-email@gmail.com>"
```

**3단계: 백엔드 서버 재시작**
```bash
cd salemanager-backend
# 기존 프로세스 종료 후 재시작
npm run dev
```

### 방법 2: Mailtrap (테스트용, 추천)

**Mailtrap**은 이메일 테스트용 무료 서비스입니다.

**1단계: Mailtrap 가입**
1. [https://mailtrap.io](https://mailtrap.io) 접속
2. 회원가입 (무료)
3. "Sending" > "SMTP Settings" > "+" 클릭
4. 자격 증명 확인

**2단계: .env 파일 설정**
```bash
EMAIL_HOST=sandbox.smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=your-mailtrap-username
EMAIL_PASS=your-mailtrap-password
EMAIL_FROM="SaleManager <noreply@salemanager.com>"
```

### 방법 3: 네이버 작업 메일

**1단계: 네이버 메일 설정**
1. [네이버 메일](https://mail.naver.com) 로그인
2. 환경설정 > POP3/IMAP 설정
3. POP3/SMTP 설정 > SMTP 사용
4. SMTP 인증 사용 > SMTP 신규 사용 > 인증키 생성

**2단계: .env 파일 설정**
```bash
EMAIL_HOST=smtp.naver.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-naver-id@naver.com
EMAIL_PASS=SMTP_인증키
EMAIL_FROM="SaleManager <your-id@naver.com>"
```

## 설정 확인 방법

설정 후 백엔드 서버를 재시작하고 테스트:

```bash
curl -X POST http://localhost:3000/api/emails/send \
  -H "Content-Type: application/json" \
  -d '{
    "to": ["your-email@example.com"],
    "subject": "테스트 이메일",
    "body": "SMTP 설정 테스트입니다."
  }'
```

성공하면 다음 응답을 받습니다:
```json
{
  "success": true,
  "messageId": "<실제 Message ID>"
}
```

## 주의사항

- ⚠️ **Gmail**: 2단계 인증 필수, 앱 비밀번호 사용
- ⚠️ **보안**: .env 파일을 절대 Git에 커밋하지 마세요
- ⚠️ **방화벽**: 포트 587/TLS 또는 465/SSL 사용

## 현재 상태

```
✅ 프론트엔드 UI: 완성
✅ 백엔드 API: 완성
✅ DB 저장 기능: 완성
⚠️ SMTP 설정: 필요 (위 방법 중 하나 선택)
```

설정 완료 후 백엔드 서버를 재시작하면 실제 이메일이 발송됩니다!
